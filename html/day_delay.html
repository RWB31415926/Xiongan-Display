<!DOCTYPE html>
<html style="height: 100%">
  <head>
    <meta charset="utf-8">
    <title>3D车辆延误</title>
  </head>
  <body style="height: 100%; margin: 0">
    <div id="container" style="height: 100%"></div>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
    <script>
      var dom = document.getElementById('container');
      var myChart = echarts.init(dom);

      var xCats = ["兴贤东路-乐安街", "兴贤路-乐安街", "容德东路-乐安街", "容德西路-乐安街", "容德路-乐安街", "渥城北路-乐安街"]; // 路口名称
      var yCats = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]; // 小时(0-23)
      var dataTriples = [[0, 0, 8268.0], [0, 1, 5407.0], [0, 2, 3089.0], [0, 3, 4493.0], [0, 4, 3211.0], [0, 5, 14609.0], [0, 6, 24899.0], [0, 7, 78039.0], [0, 8, 95639.0], [0, 9, 63140.0], [0, 10, 43217.0], [0, 11, 38975.0], [0, 12, 32184.0], [0, 13, 38976.0], [0, 14, 43664.0], [0, 15, 42271.0], [0, 16, 59425.0], [0, 17, 75320.0], [0, 18, 94389.0], [0, 19, 65965.0], [0, 20, 57648.0], [0, 21, 55584.0], [0, 22, 30011.0], [0, 23, 16547.0], [1, 0, 12147.0], [1, 1, 3369.0], [1, 2, 5962.0], [1, 3, 2840.0], [1, 4, 3101.0], [1, 5, 4946.0], [1, 6, 34212.0], [1, 7, 147923.0], [1, 8, 183023.0], [1, 9, 92523.0], [1, 10, 67406.0], [1, 11, 93675.0], [1, 12, 70055.0], [1, 13, 80475.0], [1, 14, 100917.0], [1, 15, 90078.0], [1, 16, 92341.0], [1, 17, 191799.0], [1, 18, 237877.0], [1, 19, 159414.0], [1, 20, 122209.0], [1, 21, 90799.0], [1, 22, 38970.0], [1, 23, 15403.0], [2, 0, 3466.0], [2, 1, 646.0], [2, 2, 289.0], [2, 3, 62.0], [2, 4, 521.0], [2, 5, 3825.0], [2, 6, 20347.0], [2, 7, 97736.0], [2, 8, 138881.0], [2, 9, 59548.0], [2, 10, 63727.0], [2, 11, 47341.0], [2, 12, 47362.0], [2, 13, 52621.0], [2, 14, 57780.0], [2, 15, 50360.0], [2, 16, 57819.0], [2, 17, 139667.0], [2, 18, 176705.0], [2, 19, 83313.0], [2, 20, 102552.0], [2, 21, 37217.0], [2, 22, 24487.0], [2, 23, 2442.0], [3, 0, 2132.0], [3, 1, 2001.0], [3, 2, 1037.0], [3, 3, 242.0], [3, 4, 668.0], [3, 5, 3354.0], [3, 6, 11304.0], [3, 7, 43693.0], [3, 8, 42434.0], [3, 9, 21071.0], [3, 10, 30531.0], [3, 11, 41015.0], [3, 12, 16577.0], [3, 13, 22801.0], [3, 14, 24289.0], [3, 15, 19159.0], [3, 16, 57583.0], [3, 17, 32520.0], [3, 18, 51193.0], [3, 19, 35088.0], [3, 20, 51337.0], [3, 21, 19044.0], [3, 22, 17511.0], [3, 23, 4556.0], [4, 0, 646.0], [4, 1, 129.0], [4, 2, 44.0], [4, 3, 35.0], [4, 4, 1094.0], [4, 5, 539.0], [4, 6, 3655.0], [4, 7, 17987.0], [4, 8, 20689.0], [4, 9, 17622.0], [4, 10, 7432.0], [4, 11, 19024.0], [4, 12, 6639.0], [4, 13, 4136.0], [4, 14, 7837.0], [4, 15, 4594.0], [4, 16, 9418.0], [4, 17, 22194.0], [4, 18, 60133.0], [4, 19, 24389.0], [4, 20, 5997.0], [4, 21, 7411.0], [4, 22, 2937.0], [4, 23, 913.0], [5, 0, 3908.0], [5, 1, 1658.0], [5, 2, 1212.0], [5, 3, 698.0], [5, 4, 4787.0], [5, 5, 4892.0], [5, 6, 40799.0], [5, 7, 170289.0], [5, 8, 187133.0], [5, 9, 87864.0], [5, 10, 82174.0], [5, 11, 71395.0], [5, 12, 83792.0], [5, 13, 81170.0], [5, 14, 75367.0], [5, 15, 97898.0], [5, 16, 85610.0], [5, 17, 147266.0], [5, 18, 168855.0], [5, 19, 70508.0], [5, 20, 71831.0], [5, 21, 46144.0], [5, 22, 28436.0], [5, 23, 9764.0]]; // [xIndex, yIndex, delay]
      var zMax = 237877.0;

      var option = {
        tooltip: {
          formatter: function (params) {
            var xi = params.value[0];
            var yi = params.value[1];
            var z  = params.value[2];
            return '路口：' + xCats[xi] + '<br/>' +
                   '时间：' + yCats[yi] +" 时"+'<br/>' +
                   '车辆延误：' + z+ " s";
          }
        },
        visualMap: {
          max: zMax,
          inRange: {
            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
          },
          textStyle: {
          color: '#74add1',   // 改成你想要的颜色
          fontSize: 10
        }},
        xAxis3D: {
          type: 'category',
          data: xCats,
          name: '路口',
          axisLabel: { interval: 0, rotate: 30 ,color: '#74add1'},
          axisLine: { lineStyle: { color: '#74add1' } }
        },
        yAxis3D: {
          type: 'category',
          data: yCats,
          name: '时间',
          axisLabel: { color: '#74add1'},
          axisLine: { lineStyle: { color: '#74add1' } }
        },
        zAxis3D: {
          type: 'value',
          name: '延误',
          axisLabel: { color: '#74add1'},
          axisLine: { lineStyle: { color: '#74add1' } }
        },
        grid3D: {
          boxWidth: 200,
          boxDepth: 120,
          viewControl: {},
          light: {
            main: { intensity: 1.2, shadow: true },
            ambient: { intensity: 0.3 }
          }
        },
        series: [{
          type: 'bar3D',
          data: dataTriples.map(function (item) {
            return { value: [item[0], item[1], item[2]] };
          }),
          shading: 'lambert',
          label: { show: false },
          emphasis: {label: { show: true, formatter: function (p) { return p.value[2]; }}
          }
        }]
      };

      myChart.setOption(option);
      window.addEventListener('resize', function() { myChart.resize(); });
    </script>
  </body>
</html>
