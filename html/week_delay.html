<!DOCTYPE html>
<html style="height: 100%">
  <head>
    <meta charset="utf-8">
    <title>3D车辆延误（按日期）</title>
  </head>
  <body style="height: 100%; margin: 0">
    <div id="container" style="height: 100%"></div>
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
    <script>
      var dom = document.getElementById('container');
      var myChart = echarts.init(dom);

      var xCats = ["兴贤东路-乐安街", "兴贤路-乐安街", "容德东路-乐安街", "容德西路-乐安街", "容德路-乐安街", "渥城北路-乐安街"]; // 路口
      var yCats = ["2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-17", "2025-05-18"]; // 日期
      var dataTriples = [[0, 0, 95639.0], [0, 1, 88455.0], [0, 2, 111396.0], [0, 3, 98440.0], [0, 4, 115824.0], [0, 5, 108640.0], [0, 6, 85431.0], [1, 0, 237877.0], [1, 1, 257750.0], [1, 2, 245421.0], [1, 3, 220855.0], [1, 4, 301156.0], [1, 5, 221765.0], [1, 6, 223255.0], [2, 0, 176705.0], [2, 1, 193664.0], [2, 2, 254604.0], [2, 3, 163394.0], [2, 4, 218165.0], [2, 5, 210024.0], [2, 6, 234672.0], [3, 0, 57583.0], [3, 1, 62435.0], [3, 2, 76497.0], [3, 3, 58942.0], [3, 4, 89705.0], [3, 5, 84362.0], [3, 6, 72943.0], [4, 0, 60133.0], [4, 1, 32624.0], [4, 2, 38880.0], [4, 3, 60154.0], [4, 4, 61230.0], [4, 5, 53426.0], [4, 6, 51290.0], [5, 0, 187133.0], [5, 1, 214527.0], [5, 2, 196331.0], [5, 3, 187953.0], [5, 4, 263850.0], [5, 5, 203243.0], [5, 6, 187769.0]]; // [x, y, delay]
      var zMax = 301156.0;

      var option = {
        tooltip: {
          formatter: function (p) {
            return '路口：' + xCats[p.value[0]] + '<br/>'
                 + '日期：' + yCats[p.value[1]] + '<br/>'
                 + '车辆延误：' + p.value[2];
          }
        },
        visualMap: {
          max: zMax,
          inRange: {
            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
          },
            textStyle: {
    color: '#74add1',   // 改成你想要的颜色
    fontSize: 10      // 字体大小可调
  }
        },
        xAxis3D: {
          type: 'category',
          data: xCats,
          name: '路口',
          axisLabel: { interval: 0, rotate: 30, textStyle: '#74add1' },
          axisLine: { lineStyle: { color:'#74add1'} }
        },
        yAxis3D: {
          type: 'category',
          data: yCats,
          name: '日期',
          axisLabel: { textStyle: '#74add1'},
          axisLine: { lineStyle: { color: '#74add1' } }
        },
        zAxis3D: {
          type: 'value',
          name: '延误',
          axisLabel: { textStyle: '#74add1'},
          axisLine: { lineStyle: { color: '#74add1' } }
        },
        grid3D: {
          boxWidth: 200,
          boxDepth: 120,
          viewControl: {},
          light: { main: { intensity: 1.2, shadow: true }, ambient: { intensity: 0.3 } }
        },
        series: [{
          type: 'bar3D',
          data: dataTriples.map(function (item) { return { value: [item[0], item[1], item[2]] }; }),
          shading: 'lambert',
          label: { show: false },
          emphasis: { label: { show: true, formatter: function (p) { return p.value[2]; } } }
        }]
      };
      myChart.setOption(option);
      window.addEventListener('resize', function() { myChart.resize(); });
    </script>
  </body>
</html>
